<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sentiment Analysis | Movie Reviews</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="batch.css">
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700;800&display=swap" rel="stylesheet">
</head>
<body>
  <div class="main-bg min-vh-100 py-4">
    <header class="header-gradient text-center py-4 mb-4">
      <h1 class="fw-bold display-5 text-white mb-1">
        <span class="me-2">ðŸŽ¬</span>Sentiment Analysis
      </h1>
      <nav class="mb-2">
        <a href="index.html" class="btn btn-outline-light mx-1">Home</a>
        <a href="evaluation.html" class="btn btn-outline-light mx-1">Evaluation</a>
        <a href="dataset.html" class="btn btn-outline-light mx-1">Dataset</a>
      </nav>
    </header>
    <div class="container d-flex justify-content-center">
      <div class="main-card card shadow-lg p-4" style="max-width: 900px; width:100%; border-radius: 1.5rem;">
        <h2 class="fw-bold mb-3 text-center" style="font-family: 'Montserrat', Arial, sans-serif;">Analyze a Movie Review</h2>
        <section class="input-section mb-4">
          <textarea id="single-review" class="form-control mb-2" rows="3" placeholder="Type or paste your movie review here..."></textarea>
          <div class="d-flex justify-content-center mb-2">
            <button id="analyze-btn" class="btn btn-dark btn-lg shadow btn-animated">Analyze Sentiment</button>
          </div>
          <div id="single-result" class="mt-2"></div>
          <div class="history" id="history-box" style="display:none;">
            <h4>Recent analyses</h4>
            <div id="history-list"></div>
          </div>
        </section>
        <hr>
        <section class="batch-section mb-4">
          <h3 class="fw-bold mb-2 text-center">Batch Analysis (Upload CSV)</h3>
          <div class="d-flex flex-column flex-md-row align-items-center gap-2 mb-2">
            <label for="file-input" class="btn btn-outline-primary btn-lg shadow btn-animated" style="cursor:pointer; min-width:140px;" data-bs-toggle="tooltip" title="Chá»n file CSV chá»©a cÃ¡c review Ä‘á»ƒ phÃ¢n tÃ­ch hÃ ng loáº¡t.">Choose File</label>
            <input type="file" id="file-input" accept=".csv" style="display:none;">
            <span id="file-label" class="text-muted" style="min-width:140px;">No file chosen</span>
            <button id="batch-analyze-btn" class="btn btn-danger btn-lg shadow btn-animated" data-bs-toggle="tooltip" title="Nháº¥n Ä‘á»ƒ phÃ¢n tÃ­ch cáº£m xÃºc cho toÃ n bá»™ file CSV.">Analyze File</button>
          </div>
          <div class="progress" id="upload-progress" style="display:none; width:260px; margin-top:10px;">
            <span id="upload-bar"></span>
          </div>
          <div id="upload-message" class="alert mt-2" style="display:none;"></div>
        </section>
        <section id="result-section" class="mb-2">
          <div class="d-flex justify-content-between align-items-center mb-2" id="batch-controls" style="display:none;">
            <div>
              <label for="sentiment-filter" class="me-2">Filter:</label>
              <select id="sentiment-filter" class="form-select form-select-sm d-inline-block" style="width:120px;">
                <option value="all">All</option>
                <option value="positive">Positive</option>
                <option value="negative">Negative</option>
              </select>
            </div>
            <button id="download-csv-btn" class="btn btn-outline-success btn-sm">Download CSV</button>
          </div>
          <div id="batch-table-wrap">
            <!-- Batch results will be rendered here -->
          </div>
        </section>
      </div>
    </div>
    <footer class="py-3 text-center footer-gradient text-white-50 mt-4">
      <small>Â© 2025 Movie Sentiment AI | For Statistical Machine Learning Project</small>
    </footer>
  </div>
  <script>
    // Custom file input: update label and trigger file dialog
    const fileInput = document.getElementById('file-input');
    const fileLabel = document.getElementById('file-label');
    const fileBtn = document.querySelector('label[for="file-input"]');
    if (fileInput && fileLabel && fileBtn) {
      fileBtn.addEventListener('click', function() {
        fileInput.click();
      });
      fileInput.addEventListener('change', function() {
        fileLabel.textContent = fileInput.files.length ? fileInput.files[0].name : 'No file chosen';
      });
    }
  </script>
  <script src="main.js"></script>
</body>
</html>
